CREATE DATABASE IF NOT EXISTS tetris_data ;


DROP TABLE IF EXISTS `Game`;
DROP TABLE IF EXISTS `Experiment`;
DROP TABLE IF EXISTS `Optimizer`;


CREATE TABLE IF NOT EXISTS `Optimizer`
(
	pk_ID INTEGER UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    optimizerType INTEGER, -- 0 for CMA, 1 for CE
    genSampleSize INTEGER, -- How many vectors each generation sample
    genEvalSize   INTEGER, -- How many of the best samples that carries over
    initialSigma  double   -- For CE: initial distribution variance. 
                           -- For CMA: initial setp size
    
    
);

CREATE TABLE IF NOT EXISTS `Experiment`
(
	pk_ID INTEGER UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    startPolicy VARCHAR(512), -- File holding the start policy
	piecesFile  VARCHAR(512), -- File containing data about the pieces
	gameEvaluations INTEGER UNSIGNED, -- How many games to polay for each offspring
	gameWidth INTEGER UNSIGNED, -- Width of the game board
	gameHeight INTEGER UNSIGNED, -- height of the game
	randomSeed INTEGER, -- The seed used to init the random numbers generator
    fk_optimizer INTEGER UNSIGNED, -- The optimizer used in the experiment
    FOREIGN KEY (fk_optimizer) REFERENCES Optimizer(pk_ID)
);

CREATE TABLE IF NOT EXISTS `Game`
(
	fk_experiment INTEGER UNSIGNED,
	evalNumber    INTEGER,
    generationNumber INTEGER,
	score            INTEGER,
	FOREIGN KEY (fk_experiment) REFERENCES Experiment(pk_ID)
);



